(function (a) { a.fn.dnnActionMenu = function (b) { var d = a.extend({}, a.fn.dnnActionMenu.defaultOptions, b), c = this; c.each(function () { var h = a(this); if (h.find(d.menuSelector).size() > 0) { function g(l, i, k) { var j = l.children("." + d.borderClassName); if (!j.size() > 0) { j = a('<div class="' + d.borderClassName + '"></div>').prependTo(l).css({ opacity: 0 }) } l.attr("style", "z-index:904;"); if (k) { l.find(d.menuActionSelector).fadeTo(d.fadeSpeed, i) } l.children("." + d.borderClassName).fadeTo(d.fadeSpeed, i) } function e(k, i, j) { k.removeAttr("style"); k.children("." + d.borderClassName).stop().fadeTo(d.fadeSpeed, 0); if (j) { k.find(d.menuActionSelector).stop().fadeTo(d.fadeSpeed, i) } } h.hoverIntent({ sensitivity: d.hoverSensitivity, timeout: d.hoverTimeout, interval: d.hoverInterval, over: function () { g(a(this).data("intentExpressed", true), 1, true); if (d.debug && console) { console.log("module hover intent over") } }, out: function () { e(a(this).data("intentExpressed", false), d.defaultOpacity, true); if (d.debug && console) { console.log("module hover intent out") } } }); h.hover(function () { g(a(this), d.defaultOpacity, false); if (d.debug && console) { console.log("module hover over") } }, function () { if (d.debug && console) { console.log("module hover out") } var i = a(this); if (!i.data("intentExpressed")) { e(i, 0, false) } }); function f(j) { var k = h.find(d.menuSelector).show(), i = (a(window).height() - ((j.offset().top - a(window).scrollTop()) + j.height())); if (k.height() > i) { k.position({ my: "left bottom", at: "left top", of: j }) } else { k.position({ my: "left top", at: "left bottom", of: j }) } } h.find(d.menuActionSelector).css({ opacity: d.defaultOpacity }); h.find(d.menuWrapSelector).hoverIntent({ sensitivity: d.hoverSensitivity, timeout: d.hoverTimeout, interval: d.hoverInterval, over: function () { if (d.debug && console) { console.log("module action menu hover intent over") } f(a(this)); h.find(d.menuSelector).fadeTo(d.fadeSpeed, 1) }, out: function () { if (d.debug && console) { console.log("module action menu hover intent out") } h.find(d.menuSelector).stop().fadeTo(d.fadeSpeed, 0).hide() } }); h.find(d.menuSelector).children().css({ opacity: 1 }); h.find(d.menuWrapSelector).draggable({ containment: h.children().eq(1), start: function (i, j) { h.find(d.menuSelector).hide() }, stop: function (i, j) { f(a(this)); h.find(d.menuSelector).show() } }) } }); return c }; a.fn.dnnActionMenu.defaultOptions = { menuWrapSelector: ".dnnActionMenu", menuActionSelector: ".dnnActionMenuTag", menuSelector: "ul.dnnActionMenuBody", defaultOpacity: 0.3, fadeSpeed: "fast", borderClassName: "dnnActionMenuBorder", hoverSensitivity: 2, hoverTimeout: 200, hoverInterval: 200, debug: false }; a(document).ready(function () { a(".DnnModule").dnnActionMenu() }) })(jQuery);